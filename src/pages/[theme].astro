---
// src/pages/[theme].astro
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import Services from '../components/Services.astro';
import Pricing from '../components/Pricing.astro';
import About from '../components/About.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';
import ThemeSwitcher from '../components/ThemeSwitcher.astro'; // <--- UUSI 1

import { BUSINESS_CONFIG, type Theme } from '../information/config';

// ── UUSI 2: Kerrotaan Astrolle mitä sivuja luodaan ──
export function getStaticPaths() {
  return [
    { params: { theme: 'remontti' } },
    { params: { theme: 'kahvila' } },
    { params: { theme: 'siivous' } },
  ];
}

// ── UUSI 3: Otetaan teema osoitteesta (URL) ──
const { theme } = Astro.params;
const SITE_THEME = theme as Theme;

// ... LOPPUOSA ON SAMA KUIN index.astro:ssa ...
const biz = BUSINESS_CONFIG[SITE_THEME];
const companyFull = `${biz.name} ${biz.legalName}`.trim();

type NavLink = { name: string; href: string };

let navLinks: NavLink[] = [
  { name: 'Etusivu', href: '#' },
  { name: 'Palvelut', href: '#services' },
  { name: SITE_THEME === 'kahvila' ? 'Menu' : 'Hinnasto', href: '#pricing' },
  { name: SITE_THEME === 'kahvila' ? 'Tarina' : 'Meistä', href: '#about' },
  { name: SITE_THEME === 'kahvila' ? 'Löydä meidät' : 'Ota yhteyttä', href: '#contact' }
];

const heroTitle = SITE_THEME === 'kahvila' ? 'Tuoretta kahvia & tunnelmaa' : undefined;
---

<Layout title={`${companyFull} - Etusivu`} navLinks={navLinks} preset={SITE_THEME}>
  <main>
    <Hero preset={SITE_THEME} title={heroTitle} />
    <Services preset={SITE_THEME} />
    <Pricing preset={SITE_THEME} />
    <About preset={SITE_THEME} />
    <Contact preset={SITE_THEME} />
  </main>
  
  <Footer preset={SITE_THEME} companyName={companyFull} />
  
  <ThemeSwitcher /> 
</Layout>