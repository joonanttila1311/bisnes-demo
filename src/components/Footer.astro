---
/**
 * Footer.astro
 * ─────────────────────────────────────────────────────────────
 * Päivitetty versio: Hakee yhteystiedot src/config.ts -tiedostosta.
 */
import { BUSINESS_CONFIG } from '../information/config';
import { Facebook, Instagram, Linkedin, Mail, Phone } from 'lucide-react';

interface Props {
  preset?:      'default' | 'remontti' | 'kahvila';
  companyName?: string;
}

const { preset = 'default' } = Astro.props;

// HAETAAN DATA CONFIGISTA
const biz = BUSINESS_CONFIG[preset];
const companyFull = `${biz.name} ${biz.legalName}`.trim();

const year = new Date().getFullYear();
const showCTA = preset !== 'kahvila';

const quickLinks = [
  { label: "Etusivu",      href: "#" },
  { label: "Palvelumme",   href: "#services" },
  { label: preset === 'kahvila' ? "Menu" : "Hinnasto", href: "#pricing" }, 
  { label: preset === 'kahvila' ? "Tarina" : "Meistä", href: "#about" },
  { label: preset === 'kahvila' ? "Löydä meidät" : "Ota yhteyttä", href: "#contact" },
];

// Määritellään somet configin mukaan (käytetään oletuslinkkejä jos configissa on tyhjää)
const socialLinks = [
  { label: "Facebook", href: biz.socials.facebook, Icon: Facebook },
  { label: "Instagram", href: biz.socials.instagram, Icon: Instagram },
  ...(biz.socials.linkedin ? [{ label: "LinkedIn", href: biz.socials.linkedin, Icon: Linkedin }] : []),
];
---

<footer class="footer-root relative overflow-hidden bg-slate-900 text-white">

  <div class="pointer-events-none absolute inset-x-0 top-0 h-px" style="background: linear-gradient(90deg, transparent, var(--brand-color) 40%, rgba(255,255,255,0.1) 60%, transparent);"></div>
  <div class="pointer-events-none absolute inset-0 footer-dots opacity-[0.04]"></div>

  <div class="relative mx-auto max-w-7xl px-6 py-16 lg:px-8 lg:py-20">
    <div class="grid grid-cols-1 gap-12 sm:grid-cols-2 lg:grid-cols-3 lg:gap-16">

      <div>
        <a href="#" class="mb-6 inline-flex items-center gap-3 group">
          <span class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-brand shadow-lg shadow-brand/20 transition-transform duration-300 group-hover:scale-105">
            <svg width="18" height="18" viewBox="0 0 18 18" fill="none"><rect x="2" y="2" width="6" height="6" rx="1.5" fill="white"/></svg>
          </span>
          <span class="text-xl font-extrabold text-white" style="font-family: 'Sora', sans-serif;">{companyFull}</span>
        </a>
        <p class="mb-8 max-w-xs text-sm text-slate-400" style="font-family: 'Lora', serif;">
          {preset === 'kahvila' ? 'Intohimona laatu, raaka-aineina rakkaus.' : 'Asiantuntemusta, joka kantaa. Rakennettu luottamukselle.'}
        </p>
        <ul class="space-y-3">
          <li>
            <a href={`mailto:${biz.email}`} class="group inline-flex items-center gap-3 text-sm text-slate-300 hover:text-white">
              <span class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-800 text-slate-400 group-hover:bg-brand group-hover:text-white">
                <Mail class="w-4 h-4" />
              </span>
              {biz.email}
            </a>
          </li>
          <li>
            <a href={`tel:${biz.phone}`} class="group inline-flex items-center gap-3 text-sm text-slate-300 hover:text-white">
              <span class="flex h-8 w-8 items-center justify-center rounded-lg bg-slate-800 text-slate-400 group-hover:bg-brand group-hover:text-white">
                <Phone class="w-4 h-4" />
              </span>
              {biz.phone}
            </a>
          </li>
        </ul>
      </div>

      <div>
        <h3 class="mb-6 text-xs font-bold uppercase text-slate-500" style="font-family: 'Sora', sans-serif;">Pikavalikko</h3>
        <ul class="space-y-2.5">
          {quickLinks.map(({ label, href }) => (
            <li>
              <a href={href} class="group inline-flex items-center gap-2 text-sm text-slate-400 hover:text-white">
                <span class="opacity-0 -translate-x-2 transition-all group-hover:opacity-100 group-hover:translate-x-0 text-brand">›</span>
                {label}
              </a>
            </li>
          ))}
        </ul>
        {showCTA && (
          <div class="mt-8 border-t border-slate-800 pt-8">
            <a href="#contact" class="inline-flex items-center gap-2 rounded-xl bg-brand px-5 py-2.5 text-sm font-semibold text-white hover:bg-brand-hover">
              Pyydä tarjous →
            </a>
          </div>
        )}
      </div>

      <div>
        <h3 class="mb-6 text-xs font-bold uppercase text-slate-500" style="font-family: 'Sora', sans-serif;">Seuraa meitä</h3>
        <ul class="mb-8 flex gap-3">
          {socialLinks.map(({ label, href, Icon }) => (
            <li>
              <a href={href} target="_blank" class="flex h-11 w-11 items-center justify-center rounded-xl bg-slate-800 text-slate-400 hover:bg-brand hover:text-white">
                <Icon class="w-4 h-4" />
              </a>
            </li>
          ))}
        </ul>
      </div>

    </div>

    <div class="mt-16 flex flex-col items-center justify-between gap-4 border-t border-slate-800 pt-8 sm:flex-row text-xs text-slate-500">
      <p>© {year} {companyFull}. Kaikki oikeudet pidätetään.</p>
      <div class="flex gap-6">
        <a href="#" class="hover:text-slate-300">Tietosuoja</a>
        <a href="#" class="hover:text-slate-300">Käyttöehdot</a>
      </div>
    </div>
  </div>
</footer>

<style>
  .footer-dots { background-image: radial-gradient(circle, #ffffff 1px, transparent 1px); background-size: 24px 24px; }
</style>