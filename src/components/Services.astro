---
/**
 * Services.astro
 * ─────────────────────────────────────────────────────────────
 * Päivitetty versio: Käyttää dynaamisia brand-värejä.
 */

// ── Types ─────────────────────────────────────────────────────
interface Service {
  title:       string;
  description: string;
  icon:        string;
}

interface Props {
  preset?:   'remontti' | 'kahvila' | 'default';
  title?:    string;
  subtitle?: string;
  services?: Service[];
}

// ── Presets (Vain sisältö) ─────────────────────────────────────
const PRESETS: Record<string, { title: string; subtitle: string; services: Service[] }> = {
  remontti: {
    title:    "Remonttipalvelumme",
    subtitle: "Laadukasta rakennusosaamista avainten luovutuksesta takuuhuoltoon.",
    services: [
      { title: "Kylpyhuoneremontti", description: "Täydellinen kylpyhuoneen uudistus vedeneristyksineen.", icon: "ShowerHead" },
      { title: "Keittiöremontti", description: "Suunnittelu, purkutyöt ja asennus.", icon: "ChefHat" },
      { title: "Maalaus & Tasoitus", description: "Ammattimainen seinien ja kattojen viimeistely.", icon: "PaintRoller" },
      { title: "Lattia- ja parkettityöt", description: "Asennukset, hionnat ja lakkaukset.", icon: "Layers" },
      { title: "LVI-työt", description: "Sertifioidut putki- ja ilmanvaihtoasennukset.", icon: "Wrench" },
      { title: "Takuuhuolto", description: "Kirjallinen takuu jokaiselle kohteelle.", icon: "ShieldCheck" },
    ],
  },
  kahvila: {
    title:    "Kahvilapalvelumme",
    subtitle: "Maistuvaa kahvia, tuoreita leivonnaisia ja lämmin tunnelma.",
    services: [
      { title: "Erikoiskahvit", description: "Paahdettuna kotimaisen pienpaahtimon pavulla.", icon: "Coffee" },
      { title: "Tuoreet leivonnaiset", description: "Paistetaan päivittäin paikan päällä.", icon: "Croissant" },
      { title: "Lounas", description: "Vaihtuva lähiruokalounas arkipäivisin.", icon: "UtensilsCrossed" },
      { title: "Yksityistilaisuudet", description: "Varaa koko kahvila juhliisi.", icon: "PartyPopper" },
      { title: "Take Away", description: "Nouda suoraan tiskiltä tai tilaa ennakkoon.", icon: "ShoppingBag" },
      { title: "Lahjakortit", description: "Ilahduta läheistäsi kahvilakokemuksella.", icon: "Gift" },
    ],
  },
  default: {
    title:    "Palvelumme",
    subtitle: "Kattava valikoima asiantuntijapalveluja tarpeisiisi.",
    services: [
      { title: "Konsultointi", description: "Analysoimme tilanteesi ja autamme kasvussa.", icon: "BriefcaseBusiness" },
      { title: "Projektijohtaminen", description: "Viemme projektit maaliin aikataulussa.", icon: "ClipboardList" },
      { title: "Markkinointi", description: "Kasvata näkyvyyttäsi tehokkaasti.", icon: "BarChart2" },
      { title: "Verkkosivut", description: "Modernit ja konvertoivat ratkaisut.", icon: "MonitorSmartphone" },
      { title: "Asiakaspalvelu", description: "Nopea ja asiantunteva tuki.", icon: "Headset" },
      { title: "Koulutus", description: "Räätälöidyt ohjelmat henkilöstöllesi.", icon: "GraduationCap" },
    ],
  },
};

const {
  preset   = 'default',
  title    = PRESETS[preset]?.title    ?? PRESETS.default.title,
  subtitle = PRESETS[preset]?.subtitle ?? PRESETS.default.subtitle,
  services = PRESETS[preset]?.services ?? PRESETS.default.services,
} = Astro.props as Props;

// ── Icon SVG helper ───────────────────────────────────────────
function getIconSVG(name: string): string {
  const icons: Record<string, string> = {
    ShowerHead: `<path d="M4 4a2 2 0 0 1 2-2h1a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4z"/><path d="M9.5 8.5 14 13"/><path d="M6 10v4"/><path d="M10 6h4"/><circle cx="18" cy="18" r="3"/>`,
    ChefHat: `<path d="M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z"/>`,
    PaintRoller: `<path d="M14 2H6a2 2 0 0 0-2 2v4a2 2 0 0 0 2 2h8"/><rect width="4" height="6" x="16" y="4" rx="1"/><path d="M18 10v10"/>`,
    Layers: `<path d="m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z"/>`,
    Wrench: `<path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"/>`,
    ShieldCheck: `<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/><path d="m9 12 2 2 4-4"/>`,
    Coffee: `<path d="M10 2v2"/><path d="M14 2v2"/><path d="M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14"/>`,
    Croissant: `<path d="m4.6 13.11 5.79-3.21C11.39 8.7 13 7.47 13 5.5a3.5 3.5 0 0 0-7 0 3.5 3.5 0 0 0-1.71 6.5Z"/>`,
    UtensilsCrossed: `<path d="m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8"/>`,
    PartyPopper: `<path d="M5.8 11.3 2 22l10.7-3.79"/>`,
    ShoppingBag: `<path d="M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z"/>`,
    Gift: `<rect x="3" y="8" width="18" height="4" rx="1"/><path d="M12 8v13"/>`,
    BriefcaseBusiness: `<rect width="20" height="14" x="2" y="6" rx="2"/><path d="M16 6V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v2"/>`,
    ClipboardList: `<rect width="8" height="4" x="8" y="2" rx="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>`,
    BarChart2: `<line x1="18" x2="18" y1="20" y2="10"/><line x1="12" x2="12" y1="20" y2="4"/><line x1="6" x2="6" y1="20" y2="14"/>`,
    MonitorSmartphone: `<path d="M18 8V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h8"/><rect width="6" height="10" x="16" y="12" rx="2"/>`,
    Headset: `<path d="M3 11h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-5Zm0 0a9 9 0 1 1 18 0m0 0v5a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3Z"/>`,
    GraduationCap: `<path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/>`,
  };
  return icons[name] ?? `<circle cx="12" cy="12" r="9"/><path d="M12 8v4"/>`;
}
---

<section id="services" class="services-section relative overflow-hidden bg-gray-50 py-24 sm:py-32">

  <div class="pointer-events-none absolute inset-0 -z-10" aria-hidden="true">
    <div class="absolute inset-0 services-dots"></div>
    <div
      class="absolute -top-40 left-1/2 h-125 w-125 -translate-x-1/2 rounded-full opacity-10"
      style="background: radial-gradient(circle, var(--brand-color) 0%, transparent 70%);"
    ></div>
  </div>

  <div class="mx-auto max-w-7xl px-6 lg:px-8">

    <div class="section-header mx-auto mb-16 max-w-2xl text-center">
      <span class="inline-block mb-4 rounded-full px-4 py-1.5 text-xs font-bold uppercase tracking-widest bg-brand/10 text-brand">
        Palvelumme
      </span>

      <h2 class="mb-5 font-extrabold leading-tight tracking-tight text-gray-900" style="font-family: 'Sora', sans-serif; font-size: clamp(1.875rem, 4vw, 3rem);">
        {title}
      </h2>

      <p class="text-lg leading-relaxed text-gray-500" style="font-family: 'Lora', serif;">
        {subtitle}
      </p>
    </div>

    <ul class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3" role="list">
      {services.map((service, i) => (
        <li
          class="service-card group relative flex flex-col rounded-2xl bg-white p-8 shadow-sm ring-1 ring-gray-200/70 transition-all duration-300 hover:-translate-y-1.5 hover:shadow-xl hover:ring-2 hover:ring-brand/30"
          style={`animation-delay: ${i * 80}ms`}
        >
          <span class="absolute right-6 top-6 text-4xl font-black text-gray-100 select-none leading-none group-hover:text-brand/5 transition-colors duration-300">
            {String(i + 1).padStart(2, '0')}
          </span>

          <div class="mb-6 inline-flex h-14 w-14 shrink-0 items-center justify-center rounded-2xl bg-brand/5 transition-transform duration-300 group-hover:scale-110">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="26"
              height="26"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="text-brand"
              aria-hidden="true"
              set:html={getIconSVG(service.icon)}
            />
          </div>

          <h3 class="mb-3 text-lg font-bold text-gray-900" style="font-family: 'Sora', sans-serif;">
            {service.title}
          </h3>

          <p class="flex-1 text-sm leading-relaxed text-gray-500" style="font-family: 'DM Sans', sans-serif;">
            {service.description}
          </p>

          <div class="mt-6 flex items-center gap-1.5">
            <span class="text-sm font-semibold text-brand opacity-0 -translate-x-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0">
              Lue lisää
            </span>
            <svg class="h-4 w-4 text-brand opacity-0 -translate-x-2 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-0" style="transition-delay: 40ms;" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/>
            </svg>
          </div>
        </li>
      ))}
    </ul>

    <div class="mt-16 flex flex-col items-center gap-4 sm:flex-row sm:justify-center">
      <p class="text-gray-500" style="font-family: 'DM Sans', sans-serif;">Etkö löytänyt etsimääsi?</p>
      <a href="#contact" class="inline-flex items-center gap-2 rounded-xl px-6 py-3 text-sm font-bold text-white shadow-md bg-brand shadow-brand/20 transition-all duration-200 hover:-translate-y-0.5 hover:bg-brand-hover hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-brand/30">
        Kysy lisää
        <svg class="h-4 w-4" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3"/>
        </svg>
      </a>
    </div>

  </div>
</section>

<style>
  .services-dots {
    background-image: radial-gradient(circle, #d1d5db 1px, transparent 1px);
    background-size: 28px 28px;
    opacity: 0.45;
  }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(24px); } to { opacity: 1; transform: translateY(0); } }
  .section-header { animation: fadeUp 0.7s cubic-bezier(0.16,1,0.3,1) both; }
  .service-card { animation: fadeUp 0.6s cubic-bezier(0.16,1,0.3,1) both; opacity: 0; animation-fill-mode: forwards; }
</style>