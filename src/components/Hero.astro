---
// Hero.astro - Nyt täysin puhdas ja hakee sisällön configista
import { ArrowRight, ChevronRight, CheckCircle } from 'lucide-react';
// TUODAAN MYÖS "CONTENT"
import { BUSINESS_CONFIG, CONTENT } from '../information/config'; 

interface Props {
  preset?: 'default' | 'remontti' | 'kahvila' | 'siivous';
  // Manuaaliset ylikirjoitukset ovat yhä mahdollisia, jos niitä joskus tarvitaan
  title?: string;
}

const { preset = 'default', ...manualProps } = Astro.props;

// 1. HAETAAN LIIKETOIMINTATIEDOT (Kuva)
const biz = BUSINESS_CONFIG[preset];

// 2. HAETAAN TEKSTISISÄLTÖ UUDESTA CONTENT-OSIOSTA
const content = CONTENT[preset].hero;

// Määritellään lopulliset arvot (manuaalinen prop voittaa configin)
const title = manualProps.title ?? content.title;
const imageSrc = biz.heroImage; // Kuva haetaan yhä business-datasta
---

<section class="hero-section relative overflow-hidden bg-white">
  
  <div class="pointer-events-none absolute inset-0 -z-10" aria-hidden="true">
    <div class="absolute -top-32 -left-32 h-150 w-150 rounded-full opacity-10" style="background: radial-gradient(circle, var(--brand-color) 0%, transparent 70%);"></div>
    <div class="absolute -bottom-24 right-0 h-100 w-100 rounded-full opacity-5" style="background: radial-gradient(circle, var(--brand-color) 0%, transparent 70%);"></div>
    <div class="absolute inset-0 hero-dots-bg"></div>
  </div>

  <div class="mx-auto max-w-7xl px-6 py-20 sm:py-28 lg:px-8 lg:py-36">
    <div class="grid grid-cols-1 items-center gap-16 lg:grid-cols-2 lg:gap-12">

      <div class="hero-text flex flex-col items-start">
        <div class="mb-6 flex items-center gap-2 rounded-full border border-brand/20 bg-brand/5 px-4 py-1.5">
          <span class="inline-block h-2 w-2 rounded-full bg-brand animate-pulse"></span>
          <span class="text-sm font-semibold tracking-wide text-brand uppercase font-heading">
            {content.badge}
          </span>
        </div>

        <h1 
          class="hero-h1 mb-6 font-extrabold leading-tight tracking-tight text-gray-900 font-heading"
          set:html={title}
        ></h1>

        <p class="hero-lead mb-10 max-w-lg leading-relaxed text-gray-600 font-body">
          {content.subtitle}
        </p>

        <div class="flex flex-wrap items-center gap-4">
          <a href="#contact" class="cta-primary group inline-flex items-center gap-2.5 rounded-(--radius-btn) bg-brand px-7 py-4 text-base font-bold text-white shadow-lg shadow-brand/20 transition-all duration-300 hover:-translate-y-0.5 hover:bg-brand-hover font-heading">
            {content.btnPrimary}
            <ArrowRight className="h-5 w-5 transition-transform duration-300 group-hover:translate-x-1" />
          </a>
          
          <a href="#about" class="cta-secondary group inline-flex items-center gap-2.5 rounded-(--radius-btn) border-2 border-gray-200 bg-white px-7 py-4 text-base font-bold text-gray-700 shadow-sm transition-all duration-300 hover:-translate-y-0.5 hover:border-brand/50 hover:text-brand font-heading">
            {content.btnSecondary}
            <ChevronRight className="h-5 w-5 text-gray-400 transition-all duration-300 group-hover:translate-x-1 group-hover:text-brand" />
          </a>
        </div>

        {content.showTrust && (
          <div class="mt-12 flex flex-wrap items-center gap-x-8 gap-y-4 border-t border-gray-100 pt-8">
            <div class="text-center"><p class="text-2xl font-extrabold text-gray-900 font-heading">+240</p><p class="text-sm text-gray-500 font-body">Asiakasta</p></div>
            <div class="hidden h-10 w-px bg-gray-200 sm:block"></div>
            <div class="text-center"><p class="text-2xl font-extrabold text-gray-900 font-heading">98%</p><p class="text-sm text-gray-500 font-body">Tyytyväisyys</p></div>
            <div class="hidden h-10 w-px bg-gray-200 sm:block"></div>
            <div class="text-center">
              <p class="text-2xl font-extrabold text-gray-900 font-heading">12v</p>
              <p class="text-sm text-gray-500 font-body">Kokemus alalta</p>
            </div>
          </div>
        )}
      </div>

      <div class="hero-image relative flex items-center justify-center lg:justify-end">
        <div class="absolute -right-6 -top-6 h-48 w-48 rounded-(--radius-box) border-4 border-brand/10 opacity-60 -z-10"></div>
        
        <div class="relative w-full max-w-lg">
          {content.showCards && (
             <>
               <div class="float-card absolute -left-8 top-8 z-20 flex items-center gap-3 rounded-(--radius-box) bg-white px-5 py-3.5 shadow-xl ring-1 ring-gray-100 sm:-left-12">
                  <span class="flex h-9 w-9 shrink-0 items-center justify-center rounded-xl bg-green-100">
                    <CheckCircle className="h-5 w-5 text-green-600" />
                  </span>
                  <div><p class="text-xs font-semibold text-gray-500 uppercase font-heading">Projekti valmis</p><p class="text-sm font-bold text-gray-900 font-body">Etuajassa</p></div>
               </div>
            </>
          )}

          <img src={imageSrc} alt={biz.name} class="hero-img relative z-10 w-full rounded-(--radius-box) object-cover shadow-2xl" style="aspect-ratio: 3/2;" />
        </div>
      </div>

    </div>
  </div>
</section>

<style>
  .hero-dots-bg { background-image: radial-gradient(circle, #d1d5db 1px, transparent 1px); background-size: 28px 28px; opacity: 0.5; }
  .hero-h1 { font-size: clamp(2.25rem, 5vw, 3.75rem); line-height: 1.1; letter-spacing: -0.02em; }
  .hero-lead { font-size: clamp(1rem, 2vw, 1.125rem); }
  @keyframes fadeUp { from { opacity: 0; transform: translateY(28px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes fadeRight { from { opacity: 0; transform: translateX(36px); } to { opacity: 1; transform: translateX(0); } }
  @keyframes floatY { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
  .hero-text { animation: fadeUp 0.75s cubic-bezier(0.16, 1, 0.3, 1) both; }
  .hero-image { animation: fadeRight 0.85s 0.2s cubic-bezier(0.16, 1, 0.3, 1) both; }
  .hero-img { animation: floatY 6s ease-in-out 1s infinite; }
  .float-card { animation: floatY 5s ease-in-out infinite; }
  @media (max-width: 640px) {
    .hero-section { text-align: center; }
    .hero-text { align-items: center; }
    .hero-image { margin-top: 2rem; }
  }
</style>